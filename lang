#!/bin/bash

if [ "x$(id -u)" != 'x0' ]; then
	echo 'Error: this script can only be executed by root'
	exit 1
elif [ -f /etc/os-release ]; then
    . /etc/os-release
    OS=$NAME
elif type lsb_release >/dev/null 2>&1; then
    OS=$(lsb_release -si)
elif [ -f /etc/lsb-release ]; then
    . /etc/lsb-release
    OS=$DISTRIB_ID
elif [ -f /etc/debian_version ]; then
    OS=Debian
elif [ -f /etc/redhat-release ]; then
    OS=RHEL
else
    OS=$(uname -s)
fi

if [ "$OS" == "Ubuntu" ] || [ "$OS" == "Debian" ] || [ "$OS" == "Debian GNU/Linux" ]; then 
	printf "\nForce Installing Language Packages ... (May take a while) \n"
	
	sed -i 's/^# *\(ar_EG.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|                    |     (1.7%)\r'
	locale-gen ar_EG.utf8 > /dev/null
	echo -ne '|                    |     (3.4%)\r'
	sed -i 's/^# *\(bs_BA.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#                   |     (5.1%)\r'
	locale-gen bs_BA.utf8 > /dev/null
	echo -ne '|#                   |     (6.8%)\r'
	sed -i 's/^# *\(cs_CZ.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#                   |     (8.5%)\r'
	locale-gen cs_CZ.utf8 > /dev/null
	echo -ne '|##                  |     (11.9%)\r'
	sed -i 's/^# *\(zh_CN.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|##                  |     (13.6%)\r'
	locale-gen zh_CN.utf8 > /dev/null
	echo -ne '|##                  |     (15.3%)\r'
	sed -i 's/^# *\(da_DK.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|###                 |     (17.0%)\r'
	locale-gen da_DK.utf8 > /dev/null
	echo -ne '|###                 |     (18.7%)\r'
	sed -i 's/^# *\(de_DE.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|###                 |     (20.4%)\r'
	locale-gen de_DE.utf8 > /dev/null
	echo -ne '|####                |     (22.1%)\r'
	sed -i 's/^# *\(el_GR.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|####                |     (23.8%)\r'
	locale-gen el_GR.utf8 > /dev/null
	echo -ne '|####                |     (25.5%)\r'
	sed -i 's/^# *\(fa_IR.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#####               |     (28.9%)\r'
	locale-gen fa_IR.utf8 > /dev/null
	echo -ne '|#####               |     (30.6%)\r'
	sed -i 's/^# *\(fi_FI.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#####               |     (32.3%)\r'
	locale-gen fi_FI.utf8 > /dev/null
	echo -ne '|######              |     (34.0%)\r'
	sed -i 's/^# *\(hu_HU.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|######              |     (35.7%)\r'
	locale-gen hu_HU.utf8 > /dev/null
	echo -ne '|######              |     (37.4%)\r'
	sed -i 's/^# *\(id_ID.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#######             |     (39.1%)\r'
	locale-gen id_ID.utf8 > /dev/null
	echo -ne '|#######             |     (40.8%)\r'
	sed -i 's/^# *\(it_IT.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#######             |     (42.5%)\r'
	locale-gen it_IT.utf8 > /dev/null
	echo -ne '|########            |     (44.2%)\r'
	sed -i 's/^# *\(ja_JP.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|########            |     (45.9%)\r'
	locale-gen ja_JP.utf8 > /dev/null
	echo -ne '|########            |     (47.6%)\r'
	sed -i 's/^# *\(ka_GE.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#########           |     (49.3%)\r'
	locale-gen ka_GE.utf8 > /dev/null
	echo -ne '|#########           |     (51.0%)\r'
	sed -i 's/^# *\(nl_NL.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#########           |     (52.7%)\r'
	locale-gen nl_NL.utf8 > /dev/null
	echo -ne '|##########          |     (54.4%)\r'
	sed -i 's/^# *\(nn_NO.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|##########          |     (56.1%)\r'
	locale-gen nn_NO.utf8 > /dev/null
	echo -ne '|##########          |     (57.8%)\r'
	sed -i 's/^# *\(pl_PL.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|###########         |     (59.5%)\r'
	locale-gen pl_PL.utf8 > /dev/null
	echo -ne '|###########         |     (61.2%)\r'
	sed -i 's/^# *\(pt_BR.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|###########         |     (62.9%)\r'
	locale-gen pt_BR.utf8 > /dev/null
	echo -ne '|############        |     (64.6%)\r'
	sed -i 's/^# *\(pt_PT.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|############        |     (66.3%)\r'
	locale-gen pt_PT.utf8 > /dev/null
	echo -ne '|############        |     (68.0%)\r'
	sed -i 's/^# *\(ro_RO.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#############       |     (69.7%)\r'
	locale-gen ro_RO.utf8 > /dev/null
	echo -ne '|#############       |     (71.4%)\r'
	sed -i 's/^# *\(ru_RU.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#############       |     (73.1%)\r'
	locale-gen ru_RU.utf8 > /dev/null
	echo -ne '|##############      |     (74.8%)\r'
	sed -i 's/^# *\(sv_SE.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|##############      |     (76.5%)\r'
	locale-gen sv_SE.utf8 > /dev/null
	echo -ne '|##############      |     (78.2%)\r'
	sed -i 's/^# *\(tr_TR.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|###############     |     (79.9%)\r'
	locale-gen tr_TR.utf8 > /dev/null
	echo -ne '|###############     |     (81.6%)\r'
	sed -i 's/^# *\(zh_TW.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|###############     |     (83.3%)\r'
	locale-gen zh_TW.utf8 > /dev/null
	echo -ne '|################    |     (85.0%)\r'
	sed -i 's/^# *\(uk_UA.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|################    |     (86.7%)\r'
	locale-gen uk_UA.utf8 > /dev/null
	echo -ne '|################    |     (88.4%)\r'
	sed -i 's/^# *\(vi_VN.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#################   |     (90.1%)\r'
	locale-gen vi_VN.utf8 > /dev/null
	echo -ne '|#################   |     (91.8%)\r'
	sed -i 's/^# *\(es_US.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|#################   |     (93.5%)\r'
	locale-gen es_US.utf8 > /dev/null
	echo -ne '|##################  |     (95.2%)\r'
	sed -i 's/^# *\(en_US.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|##################  |     (96.9%)\r'
	locale-gen en_US.utf8 > /dev/null
	echo -ne '|##################  |     (98.6%)\r'
	sed -i 's/^# *\(fr_FR.UTF-8\)/\1/' /etc/locale.gen > /dev/null
	echo -ne '|################### |     (99.9%)\r'
	locale-gen fr_FR.utf8 > /dev/null
	echo -ne '|####################|     (100.0%)\r'
	
	printf "\nInstallation Complete!\n"
elif [ "$OS" == "CentOS Linux" ] || [ "$OS" == "RHEL" ]; then
	printf "Language Packages not necessary for CentOS or RHEL. Exiting ...\n"
  exit 1
else
	printf "Error: VWI can only be installed on Debian, Ubuntu, CentOS, or RHEL. Exiting ...\n"
	exit 1
fi
